/*!
 * @pixi/extract - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_extract=function(e,t,r,n){"use strict";var a=new PIXI.Rectangle,i=function(e){this.renderer=e,e.extract=this};return i.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},i.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},i.prototype.canvas=function(e){var n,o,s,h=this.renderer,d=!1,u=!1;e&&(e instanceof t.RenderTexture?s=e:(s=this.renderer.generateTexture(e),u=!0)),s?(n=s.baseTexture.resolution,o=s.frame,d=!1,h.renderTexture.bind(s)):(n=this.renderer.resolution,d=!0,(o=a).width=this.renderer.width,o.height=this.renderer.height,h.renderTexture.bind(null));var c=Math.floor(o.width*n+1e-4),x=Math.floor(o.height*n+1e-4),l=new r.CanvasRenderTarget(c,x,1),g=new Uint8Array(4*c*x),v=h.gl;v.readPixels(o.x*n,o.y*n,c,x,v.RGBA,v.UNSIGNED_BYTE,g);var I=l.context.getImageData(0,0,c,x);return i.arrayPostDivide(g,I.data),l.context.putImageData(I,0,0),d&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-x)),u&&s.destroy(!0),l.canvas},i.prototype.pixels=function(e){var r,n,o,s=this.renderer,h=!1;e&&(e instanceof t.RenderTexture?o=e:(o=this.renderer.generateTexture(e),h=!0)),o?(r=o.baseTexture.resolution,n=o.frame,s.renderTexture.bind(o)):(r=s.resolution,(n=a).width=s.width,n.height=s.height,s.renderTexture.bind(null));var d=n.width*r,u=n.height*r,c=new Uint8Array(4*d*u),x=s.gl;return x.readPixels(n.x*r,n.y*r,d,u,x.RGBA,x.UNSIGNED_BYTE,c),h&&o.destroy(!0),i.arrayPostDivide(c,c),c},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},e.Extract=i,e}({},PIXI,PIXI.utils);Object.assign(this.PIXI,_pixi_extract);
//# sourceMappingURL=extract.min.js.map
